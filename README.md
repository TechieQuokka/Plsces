# π Pisces Chat System

**Windows κΈ°λ° λ©€ν‹°μ¤λ λ“ TCP μ±„ν… μ‹μ¤ν…**

Pisces Chat Systemμ€ Cμ–Έμ–΄λ΅ κµ¬ν„λ κ³ μ„±λ¥ μ±„ν… μ• ν”λ¦¬μΌ€μ΄μ…μ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ•„ν‚¤ν…μ²λ¥Ό κΈ°λ°μΌλ΅ ν•λ©°, λ‹¤μ¤‘ μ‚¬μ©μ μ‹¤μ‹κ°„ μ±„ν…μ„ μ§€μ›ν•©λ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥

### π–¥οΈ μ„λ²„
- **λ‹¤μ¤‘ ν΄λΌμ΄μ–ΈνΈ μ§€μ›** - μµλ€ 64λ…μ λ™μ‹ μ ‘μ†μ
- **μ‹¤μ‹κ°„ λ©”μ‹μ§€ λΈλ΅λ“μΊμ¤ν…** - λ¨λ“  μ‚¬μ©μμ—κ² μ¦‰μ‹ λ©”μ‹μ§€ μ „λ‹¬
- **μ‚¬μ©μ μΈμ¦ μ‹μ¤ν…** - κ³ μ ν• μ‚¬μ©μλ… κΈ°λ° μΈμ¦
- **μ—°κ²° μƒνƒ κ΄€λ¦¬** - ν•νΈλΉ„νΈλ¥Ό ν†µν• μλ™ μ—°κ²° κ°μ§€
- **λΉ„λ™κΈ° I/O μ²λ¦¬** - select() κΈ°λ° λ…ΌλΈ”λ΅ν‚Ή μ†μΌ“
- **κ΄€λ¦¬μ κΈ°λ¥** - μ„λ²„ μƒνƒ λ¨λ‹ν„°λ§ λ° ν†µκ³„

### π’» ν΄λΌμ΄μ–ΈνΈ
- **λ©€ν‹°μ¤λ λ“ μ•„ν‚¤ν…μ²** - UIμ™€ λ„¤νΈμ›ν¬ μ²λ¦¬ λ¶„λ¦¬
- **μ½μ†” κΈ°λ° UI** - μ§κ΄€μ μΈ ν…μ¤νΈ μΈν„°νμ΄μ¤
- **μλ™ μ¬μ—°κ²°** - λ„¤νΈμ›ν¬ μ¤‘λ‹¨ μ‹ μλ™ λ³µκµ¬
- **λ…λ Ήμ–΄ μ‹μ¤ν…** - λ‹¤μ–‘ν• μ±„ν… λ…λ Ήμ–΄ μ§€μ›
- **μ‹¤μ‹κ°„ μ•λ¦Ό** - μ‚¬μ©μ μ…/ν‡΄μ¥ μ•λ¦Ό

## π—οΈ μ‹μ¤ν… κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    TCP/IP    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Chat Client   β”‚ β—„β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί  β”‚   Chat Server   β”‚
β”‚                 β”‚              β”‚                 β”‚
β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚              β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”‚ UI Thread   β”‚ β”‚              β”‚ β”‚Main Loop    β”‚ β”‚
β”‚ β”‚             β”‚ β”‚              β”‚ β”‚(select)     β”‚ β”‚
β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚              β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚              β”‚ β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚ β”‚Network      β”‚ β”‚              β”‚ β”‚Client       β”‚ β”‚
β”‚ β”‚Thread       β”‚ β”‚              β”‚ β”‚Manager      β”‚ β”‚
β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚              β”‚ β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”              β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π€ λΉ λ¥Έ μ‹μ‘

### μ‹μ¤ν… μ”κµ¬μ‚¬ν•­
- **μ΄μμ²΄μ **: Windows 10/11 (64-bit)
- **μ»΄νμΌλ¬**: Visual Studio 2019 μ΄μƒ λλ” MinGW-w64
- **λΌμ΄λΈλ¬λ¦¬**: Winsock2 (ws2_32.lib)

### λΉλ“ λ°©λ²•

#### Visual Studio μ‚¬μ©
1. `Pisces.Chat.sln` μ†”λ£¨μ… νμΌ μ—΄κΈ°
2. λΉλ“ κµ¬μ„±μ„ `Release` λλ” `Debug`λ΅ μ„¤μ •
3. **μ†”λ£¨μ… λΉλ“** (`Ctrl+Shift+B`)

#### λ…λ Ήμ¤„ λΉλ“
```bash
# ν”„λ΅μ νΈ λ””λ ‰ν† λ¦¬μ—μ„
msbuild Pisces.Chat.sln /p:Configuration=Release /p:Platform=x64
```

### μ‹¤ν–‰ λ°©λ²•

#### μ„λ²„ μ‹¤ν–‰
```bash
# κΈ°λ³Έ μ„¤μ •μΌλ΅ μ„λ²„ μ‹¤ν–‰ (ν¬νΈ 8080)
./server.exe

# μ‚¬μ©μ μ§€μ • μ„¤μ •μΌλ΅ μ‹¤ν–‰
./server.exe -p 9000 -m 32 -v
```

#### ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
```bash
# κΈ°λ³Έ μ„¤μ •μΌλ΅ ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
./client.exe

# μλ™ μ—°κ²° λ° μΈμ¦
./client.exe -s localhost -p 8080 -u "μ‚¬μ©μλ…" -c -a
```

## π“– μ‚¬μ©λ²•

### μ„λ²„ λ…λ Ήμ–΄
```bash
server.exe [μµμ…]

μµμ…:
  -p, --port <ν¬νΈ>          μ„λ²„ ν¬νΈ (κΈ°λ³Έκ°’: 8080)
  -b, --bind <μΈν„°νμ΄μ¤>     λ°”μΈλ“ν•  IP μ£Όμ† (κΈ°λ³Έκ°’: λ¨λ“  μΈν„°νμ΄μ¤)
  -m, --max-clients <μ>     μµλ€ ν΄λΌμ΄μ–ΈνΈ μ (κΈ°λ³Έκ°’: 64)
  -v, --verbose              μƒμ„Έ λ΅κ·Έ μ¶λ ¥
  -q, --quiet                μ¤λ¥λ§ μ¶λ ¥
  -h, --help                 λ„μ›€λ§ ν‘μ‹
      --version              λ²„μ „ μ •λ³΄ ν‘μ‹
```

### ν΄λΌμ΄μ–ΈνΈ λ…λ Ήμ–΄
```bash
client.exe [μµμ…]

μµμ…:
  -s, --server <νΈμ¤νΈ>       μ„λ²„ μ£Όμ† (κΈ°λ³Έκ°’: localhost)
  -p, --port <ν¬νΈ>          μ„λ²„ ν¬νΈ (κΈ°λ³Έκ°’: 8080)
  -u, --username <μ΄λ¦„>      μ‚¬μ©μλ…
  -c, --connect              μ‹μ‘ μ‹ μλ™ μ—°κ²°
  -a, --auth                 μλ™ μΈμ¦
  -v, --verbose              μƒμ„Έ λ΅κ·Έ μ¶λ ¥
  -q, --quiet                μ¤λ¥λ§ μ¶λ ¥
      --no-colors            μƒ‰μƒ μ¶λ ¥ λΉ„ν™μ„±ν™”
  -h, --help                 λ„μ›€λ§ ν‘μ‹
      --version              λ²„μ „ μ •λ³΄ ν‘μ‹
```

### μ±„ν… λ…λ Ήμ–΄ (ν΄λΌμ΄μ–ΈνΈ λ‚΄μ—μ„ μ‚¬μ©)
```
/connect <νΈμ¤νΈ> <ν¬νΈ>     μ„λ²„μ— μ—°κ²°
/auth <μ‚¬μ©μλ…>            μ‚¬μ©μ μΈμ¦
/disconnect                 μ„λ²„ μ—°κ²° ν•΄μ 
/users                      μ¨λΌμΈ μ‚¬μ©μ λ©λ΅ λ³΄κΈ°
/status                     ν΄λΌμ΄μ–ΈνΈ μƒνƒ μ •λ³΄ μ¶λ ¥
/clear                      μ±„ν… νμ¤ν† λ¦¬ μ§€μ°κΈ°
/help                       λ…λ Ήμ–΄ λ„μ›€λ§
/quit                       ν΄λΌμ΄μ–ΈνΈ μΆ…λ£
```

## π”§ κ³ κΈ‰ μ„¤μ •

### μ„λ²„ μ„¤μ •
μ„λ²„λ” λ‹¤μκ³Ό κ°™μ€ μ£Όμ” μ„¤μ •μ„ μ§€μ›ν•©λ‹λ‹¤:

```c
typedef struct {
    uint16_t port;                  // μ„λ²„ ν¬νΈ
    char bind_interface[16];        // λ°”μΈλ“ μΈν„°νμ΄μ¤
    int max_clients;                // μµλ€ ν΄λΌμ΄μ–ΈνΈ μ
    int select_timeout_ms;          // select νƒ€μ„μ•„μ›ƒ
    int heartbeat_interval_sec;     // ν•νΈλΉ„νΈ κ°„κ²©
    int client_timeout_sec;         // ν΄λΌμ΄μ–ΈνΈ νƒ€μ„μ•„μ›ƒ
    log_level_t log_level;          // λ΅κ·Έ λ λ²¨
    int enable_heartbeat;           // ν•νΈλΉ„νΈ ν™μ„±ν™”
} server_config_t;
```

### ν΄λΌμ΄μ–ΈνΈ μ„¤μ •
```c
typedef struct {
    char server_host[256];          // μ„λ²„ νΈμ¤νΈ
    uint16_t server_port;           // μ„λ²„ ν¬νΈ
    char username[32];              // μ‚¬μ©μλ…
    int auto_reconnect;             // μλ™ μ¬μ—°κ²°
    int reconnect_interval;         // μ¬μ—°κ²° κ°„κ²©
    int connect_timeout;            // μ—°κ²° νƒ€μ„μ•„μ›ƒ
    int heartbeat_timeout;          // ν•νΈλΉ„νΈ νƒ€μ„μ•„μ›ƒ
} client_config_t;
```

## π“΅ ν”„λ΅ν† μ½ λ…μ„Έ

### λ©”μ‹μ§€ κµ¬μ΅°
λ¨λ“  λ©”μ‹μ§€λ” 12λ°”μ΄νΈ ν—¤λ”μ™€ κ°€λ³€ κΈΈμ΄ νμ΄λ΅λ“λ΅ κµ¬μ„±λ©λ‹λ‹¤:

```c
typedef struct {
    uint32_t magic;           // λ§¤μ§ λ„λ²„: 0x43484154 ("CHAT")
    uint16_t version;         // ν”„λ΅ν† μ½ λ²„μ „: 1
    uint16_t type;            // λ©”μ‹μ§€ νƒ€μ…
    uint32_t payload_size;    // νμ΄λ΅λ“ ν¬κΈ°
} message_header_t;
```

### λ©”μ‹μ§€ νƒ€μ…
- **1000λ²λ€**: μ‹μ¤ν… λ©”μ‹μ§€ (μ—°κ²°, ν•νΈλΉ„νΈ)
- **2000λ²λ€**: μΈμ¦ λ©”μ‹μ§€
- **3000λ²λ€**: μ±„ν… λ©”μ‹μ§€
- **4000λ²λ€**: μ‚¬μ©μ κ΄€λ¦¬
- **9000λ²λ€**: μ¤λ¥ λ©”μ‹μ§€

### ν†µμ‹  νλ¦„
```
ν΄λΌμ΄μ–ΈνΈ                          μ„λ²„
    β”‚                                β”‚
    β”β”€β”€ MSG_CONNECT_REQUEST β”€β”€β”€β”€β”€β”€β–Ί  β”‚
    β”‚                                β”β”€β”€ μ‚¬μ©μλ… κ²€μ¦
    β”‚ β—„β”€β”€β”€β”€ MSG_CONNECT_RESPONSE  β”€β”€β”€β”¤
    β”‚                                β”‚
    β”β”€β”€ MSG_CHAT_SEND β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί β”‚
    β”‚ β—„β”€β”€β”€β”€ MSG_CHAT_BROADCAST  β”€β”€β”€β”€β”€β”¤ (λ¨λ“  ν΄λΌμ΄μ–ΈνΈ)
    β”‚                                β”‚
    β”β”€β”€ MSG_USER_LIST_REQUEST β”€β”€β”€β”€β”€β–Ί β”‚
    β”‚ β—„β”€β”€β”€β”€ MSG_USER_LIST_RESPONSE β”€β”€β”¤
    β”‚                                β”‚
    β”β”€β—„ MSG_HEARTBEAT   β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
    β”β”€β”€ MSG_HEARTBEAT_ACK β”€β”€β”€β”€β”€β”€β”€β”€β”€β–Ί β”‚
    β”‚                                β”‚
```

## π” λ¬Έμ  ν•΄κ²°

### μμ£Ό λ°μƒν•λ” λ¬Έμ 

**Q: μ„λ²„κ°€ μ‹μ‘λμ§€ μ•μ•„μ”**
```
A: ν¬νΈκ°€ μ΄λ―Έ μ‚¬μ© μ¤‘μΈμ§€ ν™•μΈν•μ„Έμ”:
   netstat -an | findstr :8080
   λ‹¤λ¥Έ ν¬νΈλ¥Ό μ‚¬μ©ν•λ ¤λ©΄: server.exe -p 9000
```

**Q: ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ§€ μ•μ•„μ”**
```
A: 1. μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
   2. λ°©ν™”λ²½ μ„¤μ • ν™•μΈ
   3. μ¬λ°”λ¥Έ μ„λ²„ μ£Όμ†μ™€ ν¬νΈ ν™•μΈ
   4. λ„¤νΈμ›ν¬ μ—°κ²° μƒνƒ ν™•μΈ
```

**Q: λ©”μ‹μ§€κ°€ μ „λ‹¬λμ§€ μ•μ•„μ”**
```
A: 1. μ‚¬μ©μ μΈμ¦μ΄ μ™„λ£λμ—λ”μ§€ ν™•μΈ (/auth <μ‚¬μ©μλ…>)
   2. μ„λ²„ λ΅κ·Έμ—μ„ μ¤λ¥ λ©”μ‹μ§€ ν™•μΈ
   3. λ„¤νΈμ›ν¬ μ—°κ²° μƒνƒ ν™•μΈ (/status λ…λ Ήμ–΄)
```

### λ””λ²„κΉ…

μƒμ„Έν• λ΅κ·Έλ¥Ό λ³΄λ ¤λ©΄ verbose λ¨λ“λ΅ μ‹¤ν–‰ν•μ„Έμ”:
```bash
# μ„λ²„ λ””λ²„κ·Έ λ¨λ“
server.exe -v

# ν΄λΌμ΄μ–ΈνΈ λ””λ²„κ·Έ λ¨λ“  
client.exe -v
```

## πƒβ€β™‚οΈ μ„±λ¥

### λ²¤μΉλ§ν¬
- **μµλ€ λ™μ‹ μ—°κ²°**: 64κ° ν΄λΌμ΄μ–ΈνΈ
- **λ©”μ‹μ§€ μ²λ¦¬λ‰**: μ΄λ‹Ή μ•½ 1,000κ° λ©”μ‹μ§€
- **λ©”λ¨λ¦¬ μ‚¬μ©λ‰**: μ„λ²„ μ•½ 2MB, ν΄λΌμ΄μ–ΈνΈ μ•½ 1MB
- **CPU μ‚¬μ©λ¥ **: μ ν΄ μƒνƒμ—μ„ 1% λ―Έλ§

### μµμ ν™” ν
1. **μ„λ²„**: ν΄λΌμ΄μ–ΈνΈ μκ°€ λ§μ„ λ•λ” select νƒ€μ„μ•„μ›ƒμ„ μ¤„μ΄μ„Έμ”
2. **ν΄λΌμ΄μ–ΈνΈ**: μλ™ μ¬μ—°κ²° κ°„κ²©μ„ μ μ ν μ΅°μ •ν•μ„Έμ”
3. **λ„¤νΈμ›ν¬**: λ΅μ»¬ λ„¤νΈμ›ν¬μ—μ„ μµμƒμ μ„±λ¥μ„ λ³΄μ…λ‹λ‹¤

### κ°λ° κ°€μ΄λ“λΌμΈ
- μ½”λ“ μ¤νƒ€μΌ: κΈ°μ΅΄ μ½”λ“μ μ¤νƒ€μΌμ„ λ”°λΌμ£Όμ„Έμ”
- μ£Όμ„: μƒλ΅μ΄ κΈ°λ¥μ—λ” μ μ ν• μ£Όμ„μ„ μ¶”κ°€ν•΄μ£Όμ„Έμ”
- ν…μ¤νΈ: λ³€κ²½μ‚¬ν•­μ€ μ¶©λ¶„ν ν…μ¤νΈν•΄μ£Όμ„Έμ”

## π“ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„ μ¤ ν•μ— λ°°ν¬λ©λ‹λ‹¤. μμ„Έν• λ‚΄μ©μ€ `LICENSE` νμΌμ„ μ°Έμ΅°ν•μ„Έμ”.

## π‰ κ°μ‚¬μ κΈ€

μ΄ ν”„λ΅μ νΈλ” λ‹¤μ κΈ°μ λ“¤μ„ μ‚¬μ©ν•©λ‹λ‹¤:
- **Winsock2**: Windows μ†μΌ“ ν”„λ΅κ·Έλλ°
- **Windows API**: μ½μ†” UI λ° μ¤λ λ“ κ΄€λ¦¬
- **Visual Studio**: κ°λ° ν™κ²½

---

**β­ μ΄ ν”„λ΅μ νΈκ°€ λ„μ›€μ΄ λμ—λ‹¤λ©΄ Starλ¥Ό λλ¬μ£Όμ„Έμ”!**

*λ§μ§€λ§‰ μ—…λ°μ΄νΈ: 2025λ…„ 8μ›”*
